require "vagrant-aws"

Vagrant.configure("2") do |config|
  config.vm.box = "<%= node[:vagrant][:box] %>"
  <% if node[:vagrant][:provision] && node[:vagrant][:provision][:shell] %>
  config.vm.provision :shell, :path => "<%= node[:vagrant][:provision][:shell][:path] %>"
  <% end %>

  config.vm.provider :aws do |aws|
    aws.access_key_id = "<%= node[:vagrant][:access_key_id] %>"
    aws.secret_access_key = "<%= node[:vagrant][:secret_access_key] %>"
    aws.keypair_name = "<%= node[:vagrant][:keypair_name] %>"

    <% if node[:vagrant][:ami] %>
    aws.ami = "<%= node[:vagrant][:ami] %>"
    <% end %>
    aws.instance_type = "<%= node[:vagrant][:instance_type] %>"

    aws.ssh_username = "<%= node[:vagrant][:ssh_username] %>"
    aws.ssh_private_key_path = "<%= node[:vagrant][:ssh_private_key_path] %>"
  end
end

# vi: set ft=ruby :
